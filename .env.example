# Detective - Farcaster Mini App
# Environment Variables

# ============================================
# REQUIRED FOR PRODUCTION
# ============================================

# Neynar API - For Farcaster user data and validation
# Get your API key at: https://neynar.com/app/api-keys
NEYNAR_API_KEY=your_neynar_api_key_here

# Venice AI API - For bot intelligence and writing style analysis
# Get your API key at: https://venice.ai/settings/api
VENICE_API_KEY=your_venice_api_key_here

# Ably Realtime - For WebSocket chat (recommended for production)
# Get your API key at: https://ably.com/sign-up (Free tier: 200 connections)
ABLY_API_KEY=your_ably_api_key_here

# ============================================
# REDIS (Required for horizontal scaling)
# ============================================

# Option 1: Upstash Redis (Recommended for Vercel/Serverless)
# Get a free Redis instance at: https://upstash.com
# Uses REST API - works perfectly with serverless functions
UPSTASH_REDIS_REST_URL=https://your-instance.upstash.io
UPSTASH_REDIS_REST_TOKEN=your_upstash_token_here

# Option 2: Traditional Redis URL (for self-hosted or Redis Cloud)
# Get a free Redis instance at: https://redis.com/try-free/
# Format: redis://[[username][:password]@][host][:port][/db-number]
REDIS_URL=redis://localhost:6379

# Enable Redis for state management (set to 'true' for production)
# When 'false', uses in-memory storage (single server only)
# Priority: Upstash REST API > REDIS_URL > In-memory fallback
USE_REDIS=false

# ============================================
# DATABASE (Required for persistence)
# ============================================

# PostgreSQL URL - For match history and leaderboards
# Get a free PostgreSQL instance at: https://neon.tech or https://supabase.com
# Format: postgresql://[user][:password]@[host][:port]/[database]
DATABASE_URL=postgresql://localhost:5432/detective

# Enable database for persistence (set to 'true' for production)
USE_DATABASE=false

# ============================================
# OPTIONAL (Development/Testing)
# ============================================

# Feature Flags
# Enable WebSocket for real-time chat (set to 'true' to use Ably, 'false' for HTTP polling)
# IMPORTANT: Set to 'true' for production to enable real-time chat via Ably
# When 'false', the app falls back to HTTP polling which has higher latency
NEXT_PUBLIC_ENABLE_WEBSOCKET=true

# If both API keys are missing, the app will run in dev mode with mock data
# This is useful for local testing without external API dependencies

# ============================================
# TROUBLESHOOTING WEBSOCKET ISSUES
# ============================================
# If chat is not connecting when game is LIVE:
# 1. Ensure ABLY_API_KEY is set correctly
# 2. Ensure NEXT_PUBLIC_ENABLE_WEBSOCKET=true
# 3. Check browser console for [Ably] logs
# 4. Verify the Ably dashboard shows active connections
